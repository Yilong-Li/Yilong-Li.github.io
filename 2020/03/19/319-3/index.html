<!DOCTYPE html>
<html>
  <head>
      <script>
  var _hmt = _hmt || []
  ;(function() {
    var hm = document.createElement('script')
    hm.src = 'https://hm.baidu.com/hm.js?5a0acc897fd96474a2c8f4deac84611a'
    var s = document.getElementsByTagName('script')[0]
    s.parentNode.insertBefore(hm, s)
  })()
</script> 
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    
    <title>
      OO 第一单元总结 表达式求导 - Blog
    </title>
    <link rel="manifest" href="/manifest.json" />
    <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />
    
<link rel="stylesheet" href="/style/style.css">

  <meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Blog" type="application/atom+xml">
</head>
  <body>
    <canvas id='pagemap'></canvas>
    
    <div id="post-toc" class="animated hiddenToc hide">
      <span class="title">Toc</span>
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#OO-第一单元总结-表达式求导"><span class="toc-text">OO 第一单元总结 表达式求导</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#第一次作业"><span class="toc-text">第一次作业</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#①-程序结构分析"><span class="toc-text">① 程序结构分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#②-程序Bug分析"><span class="toc-text">② 程序Bug分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#③-互测采用策略"><span class="toc-text">③ 互测采用策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#④-对象创建模式"><span class="toc-text">④ 对象创建模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第二次作业"><span class="toc-text">第二次作业</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#①-程序结构分析-1"><span class="toc-text">① 程序结构分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#②-程序Bug分析-1"><span class="toc-text">② 程序Bug分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#③-互测采用策略-1"><span class="toc-text">③ 互测采用策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#④-对象创建模式-1"><span class="toc-text">④ 对象创建模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第三次作业"><span class="toc-text">第三次作业</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#①-程序结构分析-2"><span class="toc-text">① 程序结构分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#②-程序Bug分析-2"><span class="toc-text">② 程序Bug分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#③-互测采用策略-2"><span class="toc-text">③ 互测采用策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#④-对象创建模式-2"><span class="toc-text">④ 对象创建模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#心得体会"><span class="toc-text">心得体会</span></a></li></ol></li></ol>
    </div>
    
    <div id="fixed-menu-wrap">
      <span class="iconfont icon-sousuo search-box menu-reset"></span>
      <span class="icon-toc menu-reset">Toc</span>
      <span class="iconfont icon-arrowup menu-reset"></span>
    </div>
    <div id="fixed-menu">
      <span class="iconfont icon-menu-"></span>
    </div>
    <div id="progress">
      <div class="line"></div>
    </div>
    <div id="search-shade" class="animated hiddenSearch hide">
      <div class="input-wrap">
        <span class="iconfont icon-sousuo search-box"></span>
        <input type="text" placeholder="Search" />
        <span class="iconfont icon-close"></span>
      </div>
      <div class="search-result">
        <div class="meta">
          <span><b id="result-count">0</b> results found</span>
          <img src="/images/logo.jpeg" />
        </div>
        <ul id="result-box"></ul>
      </div>
    </div>
    <div id="menu-mask" class="animated hideMenuMask hide">
      <span class="iconfont icon-close"></span>
      <div class="nav">
        
        <a href="/" class="">
          首页
        </a>
        
        <a href="/archives" class="">
          归档
        </a>
        
        <a href="/categories" class="">
          分类
        </a>
        
        <a href="/tags" class="">
          标签
        </a>
        
        <a href="/friends" class="">
          友链
        </a>
        
        <a href="/about" class="">
          关于
        </a>
        
      </div>
    </div>
    <div id="header">
      <div class="intro">
        <a href="/" class="logo" style="background-image: url('/images/logo.jpeg')"></a>
        <div class="author">L1NE</div>
      </div>
      <div class="nav">
        <span class="iconfont icon-menu menu-icon"></span>
        <a href="#" class="search-box">
          <span class="iconfont icon-sousuo"></span>
        </a>
      </div>
    </div>
    <div id="side" class="animated bounceInLeft">
      <div class="shrink">
        <a href="/" class="logo" style="background-image: url('/images/logo.jpeg')"></a>
        <span class="iconfont icon-menu toggle-icon"></span>
        <a href="#" class="search-box">
          <span class="iconfont icon-sousuo"></span>
        </a>
      </div>
      <div class="magnify">
        <div class="about">
          <div class="author">L1NE</div>
          <a href="/" class="logo" style="background-image: url('/images/logo.jpeg')"></a>
        </div>

        <div class="nav">
          
          <a href="/" class="">
            首页
          </a>
          
          <a href="/archives" class="">
            归档
          </a>
          
          <a href="/categories" class="">
            分类
          </a>
          
          <a href="/tags" class="">
            标签
          </a>
          
          <a href="/friends" class="">
            友链
          </a>
          
          <a href="/about" class="">
            关于
          </a>
          
          <a href="#" class="search-box">
            <span class="iconfont icon-sousuo"></span>
          </a>
        </div>
        <div class="bottom">
          <div class="follow">
            
            <a href="https://github.com/MondayCha" target="_block">
              <span class="iconfont icon-github"></span>
            </a>
            
            <a href="https://weibo.com/u/7283248296" target="_block">
              <span class="iconfont icon-weibo"></span>
            </a>
            
            <a href="https://www.zhihu.com/people/Dlee-01" target="_block">
              <span class="iconfont icon-zhihu"></span>
            </a>
             
            <a href="/atom.xml" target="_block">
              <span class="iconfont icon-rss"></span>
            </a>
            
          </div>
        </div>
      </div>
    </div>
    <div id="container">
      <div class="main animated bounceInRight delay-0.7s">
        <article class="post-entry">
    <div class="header">
      
      <div class="title">OO 第一单元总结 表达式求导</div>
      <div class="meta">
        <span class="item">
          <span class="iconfont icon-time-circle"></span>
          <span>2020/03/19</span>
        </span>

        

         
        <span class="item">
          <span class="iconfont icon-folder"></span>
          <span>
              
                
                  <a href="/categories/学习">学习</a>
                
              
          </span>
        </span>
        
        
         
          <span class="item">
            <span class="iconfont icon-tag1"></span>
            <span>
                
                  
                    <a href="/tags/OO">OO</a>
                  
                
            </span>
          </span>
         
      </div>
      <div>
      </div>
    </div>
    <html><head></head><body><h1 id="OO-第一单元总结-表达式求导">OO 第一单元总结 表达式求导<a class="post-anchor" href="#OO-第一单元总结-表达式求导"></a></h1><p>OO第一单元通过三次递进式的作业让我们实现表达式求导，在这几次作业中我也有很多收获。下面就回顾一下前三次作业中存在的问题。</p>
<p>在个人看来，表达式求导的难点主要有三部分——对输入的处理、表达式的存储结构以及化简。这三次作业我所采用的表达式存储结构都不相同，不过重构的速度还是比较快的（安慰自己）。</p>
<h2 id="第一次作业">第一次作业<a class="post-anchor" href="#第一次作业"></a></h2><p>在第一次作业中，我的程序总体架构为提取幂函数为Poly对象，建立Polynomial类解析表达式创建幂函数对象，在主类Derivative中进行部分性能优化工作。</p>
<h3 id="①-程序结构分析">① 程序结构分析<a class="post-anchor" href="#①-程序结构分析"></a></h3><p>UML类图：</p>
<p>第一次作业的幂函数因子较为简单，代码中仅提炼出Poly对象，并在其内部实现求导方法。</p>
<p><strong>Method复杂度：</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Method</th>
<th>ev(G)</th>
<th>iv(G)</th>
<th>v(G)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Derivative.main(String[])</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Derivative.printAnswer(HashMap<biginteger, poly>)</biginteger,></td>
<td>4</td>
<td>5</td>
<td>7</td>
</tr>
<tr>
<td>Poly.Poly(BigInteger,BigInteger)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Poly.addCoef(BigInteger)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Poly.compareTo(Object)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Poly.derivative()</td>
<td>1</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>Poly.equals(Object)</td>
<td>2</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>Poly.getCoeff()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Poly.getIndex()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Poly.hashCode()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Poly.toString()</td>
<td>1</td>
<td>11</td>
<td>12</td>
</tr>
<tr>
<td>Polynomial.Polynomial(String)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Polynomial.getPolyitem()</td>
<td>1</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>Polynomial.getfirstitem()</td>
<td>1</td>
<td>9</td>
<td>10</td>
</tr>
</tbody>
</table>
</div>
<p>第一次作业中，化简主要在主类Derivative的printAnswer()方法（将第一个正项优先输出）和Poly类的toString()方法中，printAnswer()涉及对表达式的遍历，基本复杂性高；toString()则包含大量条件语句，多次调用了BigInteger中的方法，循环依赖性高。而表达式解析我采用的是正则+状态机的策略（这个策略三次作业均沿用，感觉还是很舒服的），在getfirstitem()中处理不同类型输入并归一化，代码较为复杂。</p>
<h3 id="②-程序Bug分析">② 程序Bug分析<a class="post-anchor" href="#②-程序Bug分析"></a></h3><p>第一次作业在强测、互测中均未出现Bug。</p>
<h3 id="③-互测采用策略">③ 互测采用策略<a class="post-anchor" href="#③-互测采用策略"></a></h3><p>互测时我采用的策略是“补刀”。我先是用简单的自动测试程序跑了下房间内成员的代码，不过貌似没有出现问题；然而圣杯战争发生了转机——Rider竟然拿下了一血！</p>
<p>于是我一一检查其他成员的代码，发现Berserker的正则存在问题：在正则中匹配的是“<code>[+|-]{0,2}(\\d*.)?x(..[+|-]?\\d+)?</code>”，其中的“.”可匹配任意字符，就会错误解析表达式。</p>
<p>第一次互测时认真读了屋内其他同学的代码，感觉还是很有收获的。之后两次大部分都读不下去，可读性实在是让人肝疼……放到评测姬里自生自灭吧！另外这次互测也让我意识到了高工同学的可怕之处（误），全屋子就这一个Bug，大佬换着花样hack……卷卷更健康。</p>
<h3 id="④-对象创建模式">④ 对象创建模式<a class="post-anchor" href="#④-对象创建模式"></a></h3><p>在第一次作业中，我并没有应用对象创建模式，表达式解析就顺便new了新因子，Polynomial类的紧耦合比较严重。</p>
<h2 id="第二次作业">第二次作业<a class="post-anchor" href="#第二次作业"></a></h2><p>第二次作业增加了三角函数因子，这个时候我也偷偷看了一下去年的第三次作业题目，新增加的嵌套对于表达式的化简无疑是不小的挑战。所以在规划第二次作业的总体架构时，我就面临着一个选择——是要建立终将在第三次作业重构的四元组项；还是要采用“表达式-项-因子”三层结构，为第三次作业留好迭代的空间？</p>
<p>经过一番挣扎（其实并没有，因为我还不会写三层结构），我选择了势必带来重构的四元组形式，也就是将表达式的每一项以“<code>coeff*x**powindex*sin(x)**sinindex*cos(x)**cosindex</code>”的形式存储，这样处理方式就和第一次作业基本一致。在基本架构沿用第一次作业的情况下，第二次作业给我最大的挑战反而是三角函数的化简，我的化简类Simplify的行数是最多的。</p>
<h3 id="①-程序结构分析-1">① 程序结构分析<a class="post-anchor" href="#①-程序结构分析-1"></a></h3><p><strong>UML类图</strong>：</p>
<p>架构基本沿用第一次作业，UML也差不多，不过这次的简化更复杂一些。</p>
<p><strong>Method复杂度：</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Method</th>
<th>ev(G)</th>
<th>iv(G)</th>
<th>v(G)</th>
</tr>
</thead>
<tbody>
<tr>
<td>DeriPrinter.DeriPrinter(HashMap<string, mutiitem>)</string,></td>
<td>1</td>
<td>7</td>
<td>7</td>
</tr>
<tr>
<td>DeriPrinter.getAnswer(HashMap<string, mutiitem>)</string,></td>
<td>4</td>
<td>5</td>
<td>7</td>
</tr>
<tr>
<td>DeriPrinter.printAnswer()</td>
<td>1</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>Item.Item(BigInteger,BigInteger,BigInteger)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Item.compareTo(Object)</td>
<td>3</td>
<td>3</td>
<td>3</td>
</tr>
<tr>
<td>Item.equals(Object)</td>
<td>2</td>
<td>4</td>
<td>4</td>
</tr>
<tr>
<td>Item.getCosin()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Item.getPowin()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Item.getSinin()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Item.hashCode()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Item.toString()</td>
<td>1</td>
<td>5</td>
<td>8</td>
</tr>
<tr>
<td>MainClass.main(String[])</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>MutiItem.MutiItem(BigInteger,BigInteger,BigInteger,BigInteger)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>MutiItem.MutiItem(BigInteger,Item)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>MutiItem.addCoeff(BigInteger)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>MutiItem.compareTo(Object)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>MutiItem.derivate()</td>
<td>1</td>
<td>5</td>
<td>5</td>
</tr>
<tr>
<td>MutiItem.equals(Object)</td>
<td>2</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>MutiItem.getCoeff()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>MutiItem.getCosin()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>MutiItem.getIdentity()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>MutiItem.getItem()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>MutiItem.getPowin()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>MutiItem.getSinin()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>MutiItem.hashCode()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>MutiItem.toString()</td>
<td>1</td>
<td>5</td>
<td>5</td>
</tr>
<tr>
<td>ParseExp.MutiItemSign()</td>
<td>2</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>ParseExp.ParseExp(String)</td>
<td>1</td>
<td>5</td>
<td>6</td>
</tr>
<tr>
<td>ParseExp.WrongFormat(String)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>ParseExp.getExpression()</td>
<td>1</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>ParseExp.getFirstitem()</td>
<td>3</td>
<td><strong>13</strong></td>
<td><strong>14</strong></td>
</tr>
<tr>
<td>Simplify.Simplify(HashMap<string, mutiitem>)</string,></td>
<td>1</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>Simplify.exitmatch(BigInteger,Item,Item,Item,HashMap<item, biginteger>)</item,></td>
<td>2</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>Simplify.searchcos(HashMap<item, biginteger>)</item,></td>
<td><strong>4</strong></td>
<td>6</td>
<td>9</td>
</tr>
<tr>
<td>Simplify.simplify()</td>
<td>1</td>
<td>3</td>
<td>4</td>
</tr>
</tbody>
</table>
</div>
<p>由于一开始并没有明确的化简思路，在第一遍实现了基本求导功能的代码通过中测之后，我为了实现化简功能，又对代码内类的结构做了很多修改，在这一过程中，尽管我确实用类将表达式中的Item与MulItem做了封装，但我却胡乱修改内部方法，这并不符合面向对象的思想，也导致最后代码可读性极差，也为互测时被发现的Bug埋下了祸根。具体表现到MetricReloaded的分析上，就是ParseExp类的getFirstitem()依然是复杂度重灾区，没有采用工厂模式也使得它与其他类的依赖极为严重，优化输出的内容依然有很高的基本复杂性。</p>
<h3 id="②-程序Bug分析-1">② 程序Bug分析<a class="post-anchor" href="#②-程序Bug分析-1"></a></h3><p>强测中获得性能分为16.545/20，在处理表达式化简时，我所采用的是暴力搜索的方式，每次搜索到可以合并的项就将其合并，然后进行重新搜索。</p>
<p>这种方法显然只能找到一个极优解，却不能找到最优解，表达式项存储顺序对结果也有很大影响。一种更加可行的方式是采用深度优先搜索，不过当时并没有想出具体的实现方法，只好作罢。</p>
<p>互测时被找出来一个Bug，同时发现Berserker的一个Bug（狂战士日常躺枪）。而我的Bug是HashMap的Key写错，在生成MulItem的Key时，我采用的是将指数拼接为String的方式，在指数较大时，可能会导致不同项被当作同一项存入HashMap中，造成求导错误。</p>
<p>修改也很简单，只需要在生成String的时候给不同指数加个分隔符就好了——</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MutiItem</span><span class="hljs-params">(BigInteger a, BigInteger b, BigInteger c, BigInteger d)</span> </span>{<br>    <span class="hljs-keyword">this</span>.coeff = a;<br>    <span class="hljs-keyword">this</span>.item = <span class="hljs-keyword">new</span> Item(b, c, d);<br>    <span class="hljs-comment">// before: identity = "" + b + c + d;</span><br>    identity = <span class="hljs-string">""</span> + b + <span class="hljs-string">"."</span> + c + <span class="hljs-string">"."</span> + d;<br>}<br></code></pre></td></tr></tbody></table></figure>
<p>可以发现这里我的MutiItem的构造方法是非常混乱的，不过没有发现这么明显的Bug，一方面就是混乱的优化带来的副作用；另一方面也是因为这样的数据出现几率确实很小，同屋里也只有一个同学发现了这个Bug（我后来和hack我的同学交流了下，果然是长时间跑随机自动测试程序才找到的……）</p>
<h3 id="③-互测采用策略-1">③ 互测采用策略<a class="post-anchor" href="#③-互测采用策略-1"></a></h3><p>在这次互测是采用对拍+手动构造样例+Python生成随机数据自动评测的方式。屋内除我只有一个Bug，大家很快找到之后也比较佛系。</p>
<p>互测中阅读了同屋子大佬处理简化的DFS，确实厉害；另外还拜读了另一个房间Alterego的架构，类似Sympy的表达式结构简直叫人拍案叫绝，计算方式优美，让我看到了什么是真正的封装、多态、继承，也有更多信心去面对第三次作业。（不过听说在那个屋Alterego被hack的很惨，悲）</p>
<h3 id="④-对象创建模式-1">④ 对象创建模式<a class="post-anchor" href="#④-对象创建模式-1"></a></h3><p>在第二次作业中，由于使用的是和第一次作业类似的四元组项，我依然没有应用对象创建模式，表达式解析里又new了新因子，紧耦合依然严重。这在第三次作业中有一定改善。</p>
<h2 id="第三次作业">第三次作业<a class="post-anchor" href="#第三次作业"></a></h2><p>前两次作业都没有对表达式进行结构化处理，导致了第三次作业表达式的存储结构必须大改。</p>
<p>好在表达式求导的三大难点——对输入的处理、表达式的存储结构以及化简，这次都处理得比较好——</p>
<ul>
<li>对输入的处理上，有了前两次作业中采用的正则表达式加有限状态机读入的经验，修改很快；</li>
<li>表达式的存储结构上吸取了Alterego的架构（感谢Alterego！！！！），在进行重构的时候思路比较清晰，避免了第二次作业惨剧的重演；</li>
<li>化简上，层次化的表达式存储方式发挥出了它的优越性，通过统一的接口进行因子类型的转换，效果好；</li>
</ul>
<p>在第三次作业我也首次采用了Package来管理类，也是一个小进步。</p>
<h3 id="①-程序结构分析-2">① 程序结构分析<a class="post-anchor" href="#①-程序结构分析-2"></a></h3><p><strong>UML类图：</strong></p>
<p>这一次的类图很乱，主要原因还是在于表达式也可以作为一个因子嵌套进三角函数中，类之间的相互调用也比较明显。</p>
<p><strong>Method复杂度：</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Method</th>
<th>ev(G)</th>
<th>iv(G)</th>
<th>v(G)</th>
</tr>
</thead>
<tbody>
<tr>
<td>homework.MainClass.main(String[])</td>
<td>1</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>homework.expression.ExpFunction.Exception.Exception(String)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.expression.ExpFunction.deleteSpace(String)</td>
<td>3</td>
<td>7</td>
<td>10</td>
</tr>
<tr>
<td>homework.expression.ExpFunction.matchParentheses(String,int)</td>
<td>6</td>
<td>6</td>
<td>7</td>
</tr>
<tr>
<td>homework.expression.ExpFunction.readIndex(String)</td>
<td>2</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>homework.expression.ExpFunction.simplifyExpParentheses(String)</td>
<td>9</td>
<td>11</td>
<td>14</td>
</tr>
<tr>
<td>homework.expression.ExpFunction.simplifyParentheses(String,int[])</td>
<td>1</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td>homework.expression.ExpFunction.simplifySign(String)</td>
<td>4</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>homework.expression.ExpParser.Exception.Exception(String)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.expression.ExpParser.ExpParser(String)</td>
<td>3</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>homework.expression.ExpParser.getItemAdd(String,boolean)</td>
<td>5</td>
<td>6</td>
<td>9</td>
</tr>
<tr>
<td>homework.expression.ExpParser.getItemMul(String)</td>
<td>4</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td>homework.expression.ExpParser.matchParentheses()</td>
<td>7</td>
<td>4</td>
<td>8</td>
</tr>
<tr>
<td>homework.expression.ExpParser.readOneItem(String)</td>
<td>6</td>
<td>9</td>
<td>12</td>
</tr>
<tr>
<td>homework.expression.ExpParser.spliter()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.expression.ExpSimplify.ExpSimplify(Derivable)</td>
<td>1</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>homework.expression.ExpSimplify.OnlyOneDiff(Derivable,Derivable)</td>
<td>9</td>
<td>17</td>
<td>26</td>
</tr>
<tr>
<td>homework.expression.ExpSimplify.getDiff(boolean,int,int,ItemMul,ItemMul)</td>
<td>1</td>
<td>4</td>
<td>6</td>
</tr>
<tr>
<td>homework.expression.ExpSimplify.searchSimplify(ItemAdd)</td>
<td>4</td>
<td>4</td>
<td>4</td>
</tr>
<tr>
<td>homework.expression.ExpSimplify.simplify()</td>
<td>2</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td>homework.polyitem.factor.Factor.Factor()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.Factor.Factor(BigInteger)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.Factor.getIndex()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.Factor.setIndex(BigInteger)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.Factor.updateIndex(BigInteger)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FactorExp.FactorExp()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FactorExp.FactorExp(ItemAdd)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FactorExp.FactorExp(ItemAdd,BigInteger)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FactorExp.clone()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FactorExp.derivate()</td>
<td>4</td>
<td>4</td>
<td>5</td>
</tr>
<tr>
<td>homework.polyitem.factor.FactorExp.equals(Object)</td>
<td>3</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>homework.polyitem.factor.FactorExp.equalsZero()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FactorExp.getExpression()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FactorExp.identity()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FactorExp.toString()</td>
<td>1</td>
<td>4</td>
<td>4</td>
</tr>
<tr>
<td>homework.polyitem.factor.FactorFactory.readPower(Matcher)</td>
<td>1</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>homework.polyitem.factor.FactorFactory.readTrian(Matcher)</td>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>homework.polyitem.factor.FactorFactory.simplifyFunc(Derivable)</td>
<td>2</td>
<td>4</td>
<td>5</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncConst.FuncConst()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncConst.FuncConst(BigInteger)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncConst.FuncConst(String)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncConst.clone()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncConst.derivate()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncConst.equals(Object)</td>
<td>2</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncConst.equalsOne()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncConst.equalsZero()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncConst.getValue()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncConst.identity()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncConst.setValue(BigInteger)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncConst.toString()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncConst.updateValue(BigInteger)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncPower.FuncPower()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncPower.FuncPower(BigInteger)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncPower.clone()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncPower.derivate()</td>
<td>1</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncPower.equals(Object)</td>
<td>2</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncPower.equalsZero()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncPower.identity()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncPower.toString()</td>
<td>1</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncTrian.FuncTrian()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncTrian.FuncTrian(boolean)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncTrian.FuncTrian(boolean,BigInteger)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncTrian.FuncTrian(boolean,ItemAdd)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncTrian.FuncTrian(boolean,ItemAdd,BigInteger)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncTrian.clone()</td>
<td>1</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncTrian.derivate()</td>
<td>4</td>
<td>4</td>
<td>6</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncTrian.equals(Object)</td>
<td>6</td>
<td>4</td>
<td>8</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncTrian.equalsZero()</td>
<td>3</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncTrian.identity()</td>
<td>1</td>
<td>4</td>
<td>5</td>
</tr>
<tr>
<td>homework.polyitem.factor.FuncTrian.toString()</td>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemAdd.ItemAdd()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemAdd.ItemAdd(Derivable…)</td>
<td>1</td>
<td>3</td>
<td>3</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemAdd.ItemAdd(HashMap<string, derivable>)</string,></td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemAdd.ItemAddPut(Derivable)</td>
<td>1</td>
<td>4</td>
<td>4</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemAdd.PutItemMul(ItemMul)</td>
<td>1</td>
<td>5</td>
<td>5</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemAdd.clone()</td>
<td>1</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemAdd.derivate()</td>
<td>2</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemAdd.equals(Object)</td>
<td>3</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemAdd.equalsZero()</td>
<td>3</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemAdd.getAdditem()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemAdd.getOnlyOne()</td>
<td>4</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemAdd.identity()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemAdd.onlyContainOne()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemAdd.toString()</td>
<td>6</td>
<td>5</td>
<td>7</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemMul.ItemMul()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemMul.ItemMul(Derivable…)</td>
<td>3</td>
<td>3</td>
<td>3</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemMul.ItemMulPut(Derivable)</td>
<td>3</td>
<td>5</td>
<td>6</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemMul.PutFactor(Factor)</td>
<td>6</td>
<td>10</td>
<td>10</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemMul.PutItemMul(ItemMul)</td>
<td>1</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemMul.clone()</td>
<td>1</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemMul.derivate()</td>
<td>6</td>
<td>2</td>
<td>7</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemMul.equals(Object)</td>
<td>3</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemMul.equalsZero()</td>
<td>3</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemMul.getCoeff()</td>
<td>2</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemMul.getMutiitem()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemMul.getOneExp()</td>
<td>5</td>
<td>2</td>
<td>5</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemMul.identity()</td>
<td>2</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemMul.negateCoeff(boolean)</td>
<td>1</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemMul.onlyOneExp()</td>
<td>3</td>
<td>3</td>
<td>7</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemMul.onlyOneFactor()</td>
<td>4</td>
<td>3</td>
<td>7</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemMul.removeItem(Derivable)</td>
<td>1</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemMul.setCoeffOne()</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemMul.toString()</td>
<td>1</td>
<td>7</td>
<td>7</td>
</tr>
<tr>
<td>homework.polyitem.item.ItemMul.updateCoeff(BigInteger)</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>
<p>MetricReloaded分析程序复杂度更加病态了，大量方法的结构化程度存在问题，并且集中在与化简有关的方法中。表达式解析中的readOneItem()方法三项均超标，虽然我已经进行了采用了一部分的工厂模式、将正则表达式存入单独的类中以被调用的解耦合的努力。</p>
<p><strong>Package复杂度：</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Package</th>
<th>v(G)avg</th>
<th>v(G)tot</th>
</tr>
</thead>
<tbody>
<tr>
<td>homework</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>homework.expression</td>
<td>6.68</td>
<td>127</td>
</tr>
<tr>
<td>homework.polyitem.factor</td>
<td>1.86</td>
<td>93</td>
</tr>
<tr>
<td>homework.polyitem.item</td>
<td>3.38</td>
<td>115</td>
</tr>
</tbody>
</table>
</div>
<p>通过分包，将几大功能区分开（不过这次看到20%的性能分，增加了暴力搜索提取公因式的简化方法，还是放在Exp处理中，所以耦合度也有点高）。</p>
<h3 id="②-程序Bug分析-2">② 程序Bug分析<a class="post-anchor" href="#②-程序Bug分析-2"></a></h3><p>“OO中最惨的，不是被同屋hack了50个同质Bug，而是在截止提交的下一秒意识到了自己的Bug”</p>
<p></p><p align="right">——沃茨基·硕德</p><br>在第三次作业中，我为了简化做了不少工作，也用随机数据自动测试程序做了大量的检验。然而就在周六晚上截止提交后的几秒，我突然意识到我的输出是有问题的——对于表达式因子，我将其设置为继承了Factor类，同样拥有指数Index属性，在输出时，采用的是和幂函数、三角函数一样的输出方式——“<code>(exp)**index</code>”，但在输入时表达式因子是不允许有指数的，因此属于WF。但对于Sympy，表达式的格式限定很宽松，通过计算并不能找到错误。<p></p>
<p>那能咋办……周六晚上看番转移注意力，周日在互测中尽可能挽回损失……最后发现强测没有出现这种输出，但互测时被同屋两名Servent发现了这个Bug。好在修复工作也比较简单，实在是侥幸。</p>
<h3 id="③-互测采用策略-2">③ 互测采用策略<a class="post-anchor" href="#③-互测采用策略-2"></a></h3><p>在这次互测依然是采用对拍（对军宝具）+手动构造样例（我自己构造了可能会TLE的样例，也分享到了群里）+Python生成随机数据自动评测的方式。</p>
<p>在这次对Python生成随机数据做了优化，比如Caster在指数为0时会出现各种吊诡的错误，然而互测限定指数>0，于是我将对Caster的随机数据设为指数始终>0，其他成员照旧，避免了反复查看不能hack的Bug带来的失落感。</p>
<p>最后稍微吐槽一下“不优化就不会Die”，在这次互测中，房间内8名成员，4名优化输出4名不优化，最后出Bug的都是那4名优化输出的……其中Berserker还会在表达式嵌套过多时陷入死循环，截止至本文发稿时已被修好。</p>
<h3 id="④-对象创建模式-2">④ 对象创建模式<a class="post-anchor" href="#④-对象创建模式-2"></a></h3><p>在这次的作业中终于用到了工厂模式！虽然原因是表达式解析方法太长，不得不将生成项的代码独立开来。不过我也只用工厂模式处理了幂函数、不含嵌套因子的三角函数、常数，含嵌套因子的三角函数的生成与我的状态机密切相关，难以抽象出来，这也是我的架构中的不足。</p>
<h2 id="心得体会">心得体会<a class="post-anchor" href="#心得体会"></a></h2><p>在寒假的时候，我曾看到知乎上@HansBug学长关于OO课程改革的回答，而通过这一个多月的实际体验，OO给我的感受还是很赞的，通过互测阅读同学代码、与舍友们的交流（感谢@VOIDMalkuth！！！）、水讨论区以及学习理论课，收获很大。</p>
<p>第一单元也只是从面向过程到面向对象的过渡篇章，通过这次反思，我也发现了过去几次代码中自己结构较为不合理的部分，希望能够在接下来多线程等知识的学习中进一步改善。</p>
</body></html>

  
    <div class="post-reward">
    <div id="reward-button">打赏</div>
      <div id="qr">
        <div class="wrap">
            
            <div class="bg-wrap">
              <a href="/images/zhifubao.png" target="_block" class="bg" style="background-image:url('/images/zhifubao.png')"></a>
              支付宝
            </div>
            
            
            <div class="bg-wrap">
                <a href="/images/weixin.png" target="_block" class="bg" style="background-image:url('/images/weixin.png')"></a>
              微信
            </div>
            
        </div>
      </div>
    </div>
  
  <div class="post-guide">
    <div class="item left">
        
          <a href="/2020/03/20/320-1/">《航空航天概论》Week4</a>
        
    </div>
    <div class="item right">
        
          <a href="/2020/03/19/319-1/">《航空航天概论》Week3</a>
        
    </div>
  </div>

  

  <div class="post-copyright">
    <div class="auth">
      本文作者：<a href="https://mondaycha.github.io">L1NE</a>
    </div>
    <div class="link">
      永久链接：<a href="https://mondaycha.github.io/2020/03/19/319-3/">https://mondaycha.github.io/2020/03/19/319-3/</a>
    </div>
    <div class="declare">
      版权声明：本文首发于<a href="https://mondaycha.github.io">L1NE</a>的博客，转载请注明出处！
    </div>
  </div>

  <div id="comment"></div>

  

  
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<div id="gitalk-container"></div>
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script type="text/javascript">
    var gitalk = new Gitalk({
        clientID: '3998f0df9f7ee77ed4ce',
        clientSecret: '695ac9eac6c8a97eab0c1b097df438fdcf65cb59',
        id: window.location.pathname,
        repo: 'BlogGitalk',
        owner: 'MondayCha',
        admin: 'MondayCha'
    })
    gitalk.render('gitalk-container')
</script>
  
  
</article>
        <footer>
          <div class="copyright">
            ©2021
            <a href="https://mondaycha.github.io">L1NE</a> Powered by <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> |
            <a href="https://github.com/shixiaohu2206/hexo-theme-huhu" target="_blank" rel="noopener">hexo-theme-huhu</a>
          </div>
          
        </footer>
      </div>
    </div>
  </body>
  
</html>
<script type="text/javascript">
                  window.HUHU_CONFIG = JSON.parse("{\"share\":[\"weibo\",\"weixin\",\"qqkongjian\",\"QQ\",\"douban\",\"facebook\",\"twitter\",\"google\"],\"service_worker\":{\"open\":false}}")
                </script> <script type="text/javascript">window.addEventListener('load', function() {
    
    window.loadJs = function(d, m, a) {
      var c = document.getElementsByTagName('head')[0] || document.head || document.documentElement
      var b = document.createElement('script')
      b.defer = true
      b.setAttribute('type', 'text/javascript')
      b.setAttribute('charset', 'UTF-8')
      b.setAttribute('async', 'true')
      b.setAttribute('src', d)
      m && b.setAttribute('data-main', '/scripts/app-built')
      if (typeof a === 'function') {
        if (window.attachEvent) {
          b.onreadystatechange = function() {
            var e = b.readyState
            if (e === 'loaded' || e === 'complete') {
              b.onreadystatechange = null
              a()
            }
          }
        } else {
          b.onload = a
        }
      }
      c.appendChild(b)
    }
    window.loadJs && window.loadJs('https://cdn.bootcss.com/require.js/2.3.6/require.min.js', true, function() {require.config({"paths":{"util":"util","share":"share","search":"search","pagemap":"pagemap.min","registerSW":"registerSW","valine":"cdn/Valine.min","av":["https://cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min"],"pjax":["https://cdn.bootcss.com/jquery.pjax/2.0.1/jquery.pjax.min"],"jquery":["https://cdn.bootcss.com/jquery/3.4.1/jquery.min"],"confirm":["https://cdn.bootcss.com/jquery-confirm/3.3.4/jquery-confirm.min"],"fancybox":["https://cdn.bootcss.com/fancybox/3.5.7/jquery.fancybox.min"],"chart":["https://cdn.bootcss.com/Chart.js/2.8.0-rc.1/Chart.bundle.min"]},"map":{"*":{"css":"https://cdn.bootcss.com/require-css/0.1.10/css.min.js"}},"shim":{"fancybox":{"deps":["css!https://cdn.bootcss.com/fancybox/3.5.7/jquery.fancybox.min.css"]},"confirm":{"deps":["css!https://cdn.bootcss.com/jquery-confirm/3.3.4/jquery-confirm.min.css"]},"chart":{"deps":["css!https://cdn.bootcss.com/Chart.js/2.8.0-rc.1/Chart.min.css"]}},"waitSeconds":3})})
  })</script> <script type="text/javascript">
                  ;(function() {
                    var bp = document.createElement('script')
                    var curProtocol = window.location.protocol.split(':')[0]
                    if (curProtocol === 'https') {
                      bp.src = 'https://zz.bdstatic.com/linksubmit/push.js'
                    } else {
                      bp.src = 'http://push.zhanzhang.baidu.com/push.js'
                    }
                    var s = document.getElementsByTagName('script')[0]
                    s.parentNode.insertBefore(bp, s)
                  })()
                </script> 
